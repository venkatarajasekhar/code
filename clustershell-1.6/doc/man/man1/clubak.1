.\" Man page generated from reStructeredText.
.
.TH CLUBAK 1 "2012-03-28" "1.6" "ClusterShell User Manual"
.SH NAME
clubak \- format output from clush/pdsh-like output and more
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fCclubak\fP [ OPTIONS ]
.SH DESCRIPTION
.sp
\fCclubak\fP formats text from standard input containing lines of the form
"\fInode:output\fP".  It is fully backward compatible with \fCdshbak\fP(1) but
provides additonal features. For instance, \fCclubak\fP always displays
its results sorted by node/nodeset.
.sp
You do not need to use \fCclubak\fP when using \fCclush\fP(1) as all output
formatting features are already included in. It is provided for other usages,
like post\-processing results of the form "\fInode:output\fP".
.sp
Like \fCclush\fP(1), \fCclubak\fP uses the \fIClusterShell.MsgTree\fP module of the
ClusterShell library (see \fCpydoc ClusterShell.MsgTree\fP).
.SH INVOCATION
.sp
\fCclubak\fP should be started with connected standard input.
.SH OPTIONS
.INDENT 0.0
.TP
.B \-\-version
.
show \fCclubak\fP version number and exit
.TP
.B \-b,  \-c
.
gather nodes with same output (\-c is provided for \fCdshbak\fP(1)
compatibility)
.TP
.B \-d,  \-\-debug
.
output more messages for debugging purpose
.TP
.B \-L
.
disable header block and order output by nodes
.TP
.B \-r,  \-\-regroup
.
fold nodeset using node groups
.TP
.BI \-s \ GROUPSOURCE, \ \-\-groupsource\fB= GROUPSOURCE
.
optional \fCgroups.conf\fP(5) group source to use
.TP
.B \-G,  \-\-groupbase
.
do not display group source prefix (always \fI@groupname\fP)
.TP
.BI \-S \ SEPARATOR, \ \-\-separator\fB= SEPARATOR
.
node / line content separator string (default: \fI:\fP)
.TP
.B \-F,  \-\-fast
.
faster but memory hungry mode (preload all messages per node)
.TP
.B \-T,  \-\-tree
.
message tree trace mode; switch to enable \fCClusterShell.MsgTree\fP trace mode, all keys/nodes being kept for each message element of the tree, thus allowing special output gathering
.TP
.BI \-\-color\fB= WHENCOLOR
.
whether to use ANSI colors to surround node or nodeset prefix/header with escape sequences to display them in color on the terminal. \fIWHENCOLOR\fP is \fCnever\fP, \fCalways\fP or \fCauto\fP (which use color if standard output refers to a terminal). Color is set to [34m (blue foreground text) and cannot be modified.
.TP
.B \-\-diff
.
show diff between gathered outputs
.UNINDENT
.SH EXIT STATUS
.sp
An exit status of zero indicates success of the \fCclubak\fP command.
.SH EXAMPLES
.INDENT 0.0
.IP 1. 3
.
\fCclubak\fP can be used to gather some recorded \fCclush\fP(1) results:
.UNINDENT
.INDENT 0.0
.TP
.B Record \fCclush\fP(1) results in a file:
.nf
# clush \-w node[1\-7] uname \-r >/tmp/clush_output
# clush \-w node[32\-159] uname \-r >>/tmp/clush_output
.fi
.sp
.TP
.B Display file gathered results (in line\-mode):
.nf
# clubak \-bL </tmp/clush_output
.fi
.sp
.UNINDENT
.INDENT 0.0
.IP 2. 3
.
Another example, iterate over \fInode*\fP text files in current directory and gather characters count for all of them:
.INDENT 3.0
.INDENT 3.5
.nf
# find \-name "node*" \-exec wc \-c {} ; | awk \(aq{ gsub("./","",$2); print $2": "$1 }\(aq | clubak \-bL
node[1,3]: 7
node2: 9
.fi
.sp
.UNINDENT
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fCclush\fP(1), \fCnodeset\fP(1), \fCgroups.conf\fP(5).
.SH BUG REPORTS
.INDENT 0.0
.TP
.B Use the following URL to submit a bug report or feedback:
.
\fI\%https://github.com/cea\-hpc/clustershell/issues\fP
.UNINDENT
.SH AUTHOR
Stephane Thiell, CEA DAM  <stephane.thiell@cea.fr>
.SH COPYRIGHT
CeCILL-C V1
.\" Generated by docutils manpage writer.
.\" 
.
